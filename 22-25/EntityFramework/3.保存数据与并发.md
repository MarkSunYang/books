1. 添加、修改和删除数据
添加：context.Entities.Add(entity) 或 AddRange(entities)。
修改：首先从上下文中查询出实体（这样它就会被跟踪），然后直接修改其属性。EF 的更改跟踪器会检测到这些更改。
删除：context.Entities.Remove(entity)。
保存：所有操作最终都需要调用 context.SaveChanges() 来持久化到数据库。

2. EF 的更改跟踪是如何工作
答案：DbContext 会跟踪它加载的所有实体的状态。每个实体有以下状态：
Added：新实体，将执行 INSERT。
Unchanged：从数据库加载后未更改。
Modified：属性已被修改，将执行 UPDATE。
Deleted：已标记为删除，将执行 DELETE。
Detached：不在上下文的跟踪范围内。
SaveChanges() 会为所有状态不是 Unchanged 的实体生成相应的 SQL 命令。


3. 乐观并发控制,EF 实现
概念：假设冲突不经常发生，允许多个用户同时读取和尝试更新数据，但在保存时检查数据是否被他人修改过。
ConcurrencyToken 属性：在实体类中，将一个属性（如 TimeStamp）标记为并发令牌（使用 [Timestamp] 特性或 IsConcurrencyToken() Fluent API）。这个属性在每次更新时都会被数据库或 EF 更新。

机制：当执行 UPDATE 时，EF 会在 WHERE 子句中包含该令牌的原始值。如果受影响的行数为 0，说明数据已经被他人修改，EF 会抛出 DbUpdateConcurrencyException，由开发者处理（例如，合并更改或提示用户）。