


https://docs.microsoft.com/zh-cn/dotnet/standard/microservices-architecture/container-docker-introduction/docker-terminology

https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html


设计面向微服务的应用程序
假设应用程序通过执行业务逻辑、访问数据库，并返回 HTML、JSON 或 XML 响应处理请求。 
我们将假定该应用程序必须支持多种客户端，包括运行单页面应用程序W (SPA)、传统 web 应用、移动 web 应用和本机移动应用的桌面浏览器。 
应用程序可能还会公开一个 API，供第三方使用。 它还应异步集成其微服务或外部应用程序，因此该方法有助于在发生部分失败时恢复微服务。

应用程序将包括以下类型的组件：
a.演示组件。 该组件负责处理 UI 并使用远程服务。
b.域或业务逻辑。 这是应用程序的域逻辑
c.数据库访问逻辑。 这包括负责访问数据库（SQL 或 NoSQL）的数据访问组件。
d.应用程序集成逻辑。 这包括主要基于消息代理的消息传递通道。


选择体系结构:
应用程序部署体系结构应该是什么？ 根据应用程序的规格以及开发上下文，应用程序的构建应采用以下方式：将其分解为独立的子系统（采用协作的微服务和容器的形式），其中微服务是容器。
在此方法中，每个服务（容器）实现一组紧密结合且关联的功能。 例如，应用程序可能包含目录服务，订购服务、购物篮服务、用户个人资料服务等服务。

微服务不仅使用 HTTP (REST) 等协议通信，而且尽可能进行异步通信（如使用 AMQP），尤其是传播集成事件更新时。

微服务作为相互独立的容器开发和部署。 这意味着开发团队在开发和部署特定微服务时，不会影响其他子系统。
每个微服务都有自己的数据库，从而能够从其他微服务中完全分离。 如有必要，可使用应用程序级集成事件（通过逻辑事件总线）实现不同微服务中的数据库间的一致性，正如命令查询职责分离 (CQRS) 中的处理一样。 由此，业务约束必须接受多个微服务和相关数据库之间的最终一致性。